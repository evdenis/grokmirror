.\" Man page generated from reStructuredText.
.
.TH GROK-PI-PIPER 1 "2020-10-07" "2.0.2" ""
.SH NAME
GROK-PI-PIPER \- Hook script for piping new messages from public-inbox repos
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
grok\-pi\-piper [\-h] [\-v] [\-d] \-c CONFIG [\-l PIPELAST] [\-\-version] repo
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
This is a ready\-made hook script that can be called from
pull.post_update_hook when mirroring public\-inbox repositories. It will
pipe all newly received messages to arbitrary commands defined in the
config file. The simplest configuration for lore.kernel.org is:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
~/.config/pi\-piper.conf
\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
[DEFAULT]
pipe = /usr/bin/procmail
# Prune successfully processed messages
shallow = yes

~/.procmailrc
\-\-\-\-\-\-\-\-\-\-\-\-\-
DEFAULT=$HOME/Maildir/

# Don\(aqt deliver cross\-posted duplicates
:0 Wh: .msgid.lock
| formail \-D 8192 .msgid.cache

~/.config/lore.conf
\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
[core]
toplevel = ~/.local/share/grokmirror/lore
log = ${toplevel}/grokmirror.log

[remote]
site = https://lore.kernel.org
manifest = https://lore.kernel.org/manifest.js.gz

[pull]
post_update_hook = ~/.local/bin/grok\-pi\-piper \-c ~/.config/pi\-piper.conf
include = /list\-you\-want/*
          /another\-list/*
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
It assumes that grokmirror was installed from pip. If you installed it
via some other means, please check the path for the grok\-pi\-piper
script.
.sp
Note, that initial clone may take a long time, even if you set
shallow=yes.
.sp
See pi\-piper.conf for other config options.
.SH OPTIONS
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-h\fP,\fB  \-\-help
show this help message and exit
.TP
.B \-v\fP,\fB  \-\-verbose
Be verbose and tell us what you are doing (default: False)
.TP
.B \-d\fP,\fB  \-\-dry\-run
Do a dry\-run and just show what would be done (default: False)
.TP
.BI \-c \ CONFIG\fP,\fB \ \-\-config \ CONFIG
Location of the configuration file (default: None)
.TP
.BI \-l \ PIPELAST\fP,\fB \ \-\-pipe\-last \ PIPELAST
Force pipe last NN messages in the list, regardless of tracking (default: None)
.TP
.B \-\-version
show program\(aqs version number and exit
.UNINDENT
.UNINDENT
.UNINDENT
.SH SEE ALSO
.INDENT 0.0
.IP \(bu 2
grok\-pull(1)
.IP \(bu 2
git(1)
.UNINDENT
.SH SUPPORT
.sp
Email \fI\%tools@linux.kernel.org\fP\&.
.SH AUTHOR
mricon@kernel.org

License: GPLv3+
.SH COPYRIGHT
The Linux Foundation and contributors
.\" Generated by docutils manpage writer.
.
